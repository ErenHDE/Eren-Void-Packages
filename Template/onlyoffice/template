# Template file for 'onlyoffice'
pkgname=onlyoffice
version=9.3.0
revision=1
archs="x86_64"
hostmakedepends="rpmextract"
depends="
curl
gtk+3
alsa-lib
libpulseaudio
gstreamer1
gst-plugins-base1
gst-plugins-ugly1
nss
nspr
dejavu-fonts-ttf
liberation-fonts-ttf
font-crosextra-carlito-ttf
desktop-file-utils
hicolor-icon-theme"

short_desc="An office suite that combines text, spreadsheet and presentation editors"
maintainer="ErenHDE <erenozturkhde@gmail.com>"
license="AGPL-3.0-only"
homepage="https://www.onlyoffice.com/"
options=('!strip' '!emptydirs')
distfiles="https://github.com/ONLYOFFICE/DesktopEditors/releases/download/v${version}/onlyoffice-desktopeditors.x86_64.rpm"
checksum=3df5000c06478592ccb02035bbd38260427487b96d10425b6358f13aea8cbc0e

nopie_files="
/opt/onlyoffice/desktopeditors/DesktopEditors
/opt/onlyoffice/desktopeditors/converter/x2t
/opt/onlyoffice/desktopeditors/editors_helper
"

do_install() {
    vcopy $wrksrc/usr .
    vcopy $wrksrc/opt .
    vmkdir "/usr/bin"
    ln -s /opt/onlyoffice/onlyoffice "$DESTDIR/usr/bin/onlyoffice"
}
