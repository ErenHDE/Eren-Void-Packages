#I'm having trouble keeping up with updates for this package, so I'm no longer considering updating it.
# Template file for 'microsoft-edge'
pkgname=microsoft-edge
version=144.0.3719.92
revision=1
archs="x86_64"
hostmakedepends="ImageMagick"
depends="gtk+3 libcups nss alsa-lib libXtst libdrm mesa libxml2"
short_desc="A browser that combines a minimal design with sophisticated technology to make the web faster, safer, and easier"
maintainer="Eren Öztürk <erenozturkhde@gmail.com>"
license="custom"
homepage="https://www.microsoftedgeinsider.com/en-us/download"
distfiles="https://packages.microsoft.com/repos/edge/pool/main/m/microsoft-edge-stable/${pkgname}-stable_${version}-1_amd64.deb"
checksum=7e2d6f408734ebd1d2eedfe917e6c2fd005bc996e942f820532b7da63299501a

do_install(){
    vcopy $wrksrc/usr .
    vcopy $wrksrc/opt .
    vcopy $wrksrc/etc .
	chmod 4755 "${DESTDIR}/opt/microsoft/msedge/msedge-sandbox"

	for res in 128 64 48 32; do
		magick "${DESTDIR}/opt/microsoft/msedge/product_logo_256.png" \
			-resize ${res}x${res} \
			"${DESTDIR}/opt/microsoft/msedge/product_logo_${res}.png"
	done

	for res in 22 16; do
		magick "${DESTDIR}/opt/microsoft/msedge/product_logo_24.png" \
			-resize ${res}x${res} \
			"${DESTDIR}/opt/microsoft/msedge/product_logo_${res}.png"
	done

	for res in 16 24 32 48 64 128 256; do
		install -Dm644 "${DESTDIR}/opt/microsoft/msedge/product_logo_${res}.png" \
			"${DESTDIR}/usr/share/icons/hicolor/${res}x${res}/apps/${pkgname}.png"
	done
	vinstall ${FILESDIR}/microsoft-edge-stable.sh 755 "/usr/bin/" microsoft-edge-stable
}
