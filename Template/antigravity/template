# Template file for 'antigravity'
pkgname=antigravity
version=1.19.6
revision=1
archs="x86_64"
_x86minor=1772152296
_x86check=4adf927f23143e77a9a759c97e46fe6f
hostmakedepends="jq"
_electron=electron35
depends="bash $_electron libX11 libxkbfile"
short_desc="An agentic development platform from Google, evolving the IDE into the agent-first era"
maintainer="ErenHDE <erenozturkhde@gmail.com>"
license="LicenseRef-Google-Antigravity"
homepage="https://antigravity.google/"
distfiles="https://us-central1-apt.pkg.dev/projects/$pkgname-auto-updater-dev/pool/$pkgname-debian/${pkgname}_${version}-${_x86minor}_amd64_${_x86check}.deb>Antigravity-$version-x86_64.deb"
checksum=04da15e1db2b7bd9c39708d62a2a42fc4e42ceafd977aac9a638c771117a3d7b

do_install(){
	vbin $FILESDIR/$pkgname.sh $pkgname
	vmkdir "usr/lib/$pkgname"
	vcopy share/antigravity/resources/app/* "usr/lib/$pkgname/"
	vlicense $DESTDIR/usr/lib/$pkgname/LICENSE.txt

	sed -i "s|/usr/share/antigravity/antigravity|/usr/bin/antigravity|g" share/applications/*.desktop

	vinstall share/appdata/$pkgname.appdata.xml 644 "usr/share/metainfo"
	vinstall share/applications/$pkgname.desktop 644 "usr/share/applications"
	vinstall share/applications/$pkgname-url-handler.desktop 644 "usr/share/applications"

	vinstall share/bash-completion/completions/$pkgname 644 "usr/share/bash-completion/completions"
	vinstall share/zsh/vendor-completions/_$pkgname 644 "usr/share/zsh/site-functions"
	vinstall share/mime/packages/$pkgname-workspace.xml 644 "usr/share/mime/packages"
	vinstall share/pixmaps/$pkgname.png 644 "usr/share/pixmaps"
	rm -rf "$pkgdir/usr/lib/resources/"
}
